{"version":3,"file":"urql-next.js","sources":["../src/htmlescape.ts","../src/DataHydrationContext.ts","../src/Provider.ts","../src/useUrqlValue.ts","../src/useQuery.ts"],"sourcesContent":["// See: https://github.com/vercel/next.js/blob/6bc07792a4462a4bf921a72ab30dc4ab2c4e1bda/packages/next/src/server/htmlescape.ts\n// License: https://github.com/vercel/next.js/blob/6bc07792a4462a4bf921a72ab30dc4ab2c4e1bda/packages/next/license.md\n\n// This utility is based on https://github.com/zertosh/htmlescape\n// License: https://github.com/zertosh/htmlescape/blob/0527ca7156a524d256101bb310a9f970f63078ad/LICENSE\n\nconst ESCAPE_LOOKUP: { [match: string]: string } = {\n  '&': '\\\\u0026',\n  '>': '\\\\u003e',\n  '<': '\\\\u003c',\n  '\\u2028': '\\\\u2028',\n  '\\u2029': '\\\\u2029',\n};\n\nexport const ESCAPE_REGEX = /[&><\\u2028\\u2029]/g;\n\nexport function htmlEscapeJsonString(str: string): string {\n  return str.replace(ESCAPE_REGEX, match => ESCAPE_LOOKUP[match]);\n}\n","import * as React from 'react';\nimport { ServerInsertedHTMLContext } from 'next/navigation';\nimport type { UrqlResult } from './useUrqlValue';\nimport { htmlEscapeJsonString } from './htmlescape';\n\ninterface DataHydrationValue {\n  isInjecting: boolean;\n  operationValuesByKey: Record<number, UrqlResult>;\n  RehydrateScript: () =>\n    | React.DetailedReactHTMLElement<\n        { dangerouslySetInnerHTML: { __html: string } },\n        HTMLElement\n      >\n    | React.FunctionComponentElement<any>;\n}\n\nconst DataHydrationContext = React.createContext<\n  DataHydrationValue | undefined\n>(undefined);\n\nfunction transportDataToJS(data: any) {\n  const key = 'urql_transport';\n  return `(window[Symbol.for(\"${key}\")] ??= []).push(${htmlEscapeJsonString(\n    JSON.stringify(data)\n  )})`;\n}\n\nexport const DataHydrationContextProvider = ({\n  nonce,\n  children,\n}: React.PropsWithChildren<{ nonce?: string }>) => {\n  const dataHydrationContext = React.useRef<DataHydrationValue>();\n  if (typeof window == 'undefined') {\n    if (!dataHydrationContext.current)\n      dataHydrationContext.current = buildContext({ nonce });\n  }\n\n  return React.createElement(\n    DataHydrationContext.Provider,\n    { value: dataHydrationContext.current },\n    children\n  );\n};\n\nexport function useDataHydrationContext(): DataHydrationValue | undefined {\n  const dataHydrationContext = React.useContext(DataHydrationContext);\n  const insertHtml = React.useContext(ServerInsertedHTMLContext);\n\n  if (typeof window !== 'undefined') return;\n\n  if (insertHtml && dataHydrationContext && !dataHydrationContext.isInjecting) {\n    dataHydrationContext.isInjecting = true;\n    insertHtml(() =>\n      React.createElement(dataHydrationContext.RehydrateScript, {})\n    );\n  }\n  return dataHydrationContext;\n}\n\nlet key = 0;\nfunction buildContext({ nonce }: { nonce?: string }): DataHydrationValue {\n  const dataHydrationContext: DataHydrationValue = {\n    isInjecting: false,\n    operationValuesByKey: {},\n    RehydrateScript() {\n      dataHydrationContext.isInjecting = false;\n      if (!Object.keys(dataHydrationContext.operationValuesByKey).length)\n        return React.createElement(React.Fragment);\n\n      const __html = transportDataToJS({\n        rehydrate: { ...dataHydrationContext.operationValuesByKey },\n      });\n\n      dataHydrationContext.operationValuesByKey = {};\n\n      return React.createElement('script', {\n        key: key++,\n        nonce: nonce,\n        dangerouslySetInnerHTML: { __html },\n      });\n    },\n  };\n\n  return dataHydrationContext;\n}\n","'use client';\n\nimport * as React from 'react';\nimport type { SSRExchange, Client } from 'urql';\nimport { Provider } from 'urql';\nimport { DataHydrationContextProvider } from './DataHydrationContext';\n\nexport const SSRContext = React.createContext<SSRExchange | undefined>(\n  undefined\n);\n\n/** Provider for `@urql/next` during non-rsc interactions.\n *\n * @remarks\n * `Provider` accepts a {@link Client} and provides it to all GraphQL hooks, it\n * also accepts an {@link SSRExchange} to distribute data when re-hydrating\n * on the client.\n *\n * @example\n * ```tsx\n * import {\n *  UrqlProvider,\n *  ssrExchange,\n *  cacheExchange,\n *  fetchExchange,\n *  createClient,\n * } from '@urql/next';\n *\n * const ssr = ssrExchange();\n * const client = createClient({\n *   url: 'https://trygql.formidable.dev/graphql/basic-pokedex',\n *   exchanges: [cacheExchange, ssr, fetchExchange],\n *   suspense: true,\n * });\n *\n * export default function Layout({ children }: React.PropsWithChildren) {\n *   return (\n *     <UrqlProvider client={client} ssr={ssr}>\n *      {children}\n *     </UrqlProvider>\n *   );\n * }\n *\n * ```\n */\nexport function UrqlProvider({\n  children,\n  ssr,\n  client,\n  nonce,\n}: React.PropsWithChildren<{\n  ssr: SSRExchange;\n  client: Client;\n  nonce?: string;\n}>) {\n  return React.createElement(\n    Provider,\n    { value: client },\n    React.createElement(\n      SSRContext.Provider,\n      { value: ssr },\n      React.createElement(DataHydrationContextProvider, { nonce }, children)\n    )\n  );\n}\n","'use client';\n\nimport * as React from 'react';\nimport { useDataHydrationContext } from './DataHydrationContext';\nimport { SSRContext } from './Provider';\n\nexport const symbolString = 'urql_transport';\nexport const urqlTransportSymbol = Symbol.for(symbolString);\n\nexport type UrqlResult = { data?: any; error?: any; extensions?: any };\n\nexport function useUrqlValue(operationKey: number): void {\n  const ssrExchange = React.useContext(SSRContext);\n  const rehydrationContext = useDataHydrationContext();\n\n  if (!ssrExchange) {\n    throw new Error(\n      'Missing \"UrqlProvider\" component as a parent or did not pass in an \"ssrExchange\" to the Provider.'\n    );\n  }\n\n  if (typeof window == 'undefined') {\n    const data = ssrExchange.extractData();\n    if (rehydrationContext && data[operationKey]) {\n      const res = data[operationKey];\n      const parsed = {\n        ...res,\n        extensions: res.extensions\n          ? JSON.parse(res.extensions)\n          : res.extensions,\n        data: res.data ? JSON.parse(res.data) : res.data,\n        error: res.error,\n      };\n      rehydrationContext.operationValuesByKey[operationKey] = parsed;\n    }\n  } else {\n    const stores = (window[urqlTransportSymbol as any] ||\n      []) as unknown as Array<{\n      rehydrate: Record<number, UrqlResult>;\n    }>;\n\n    const store = stores.find(\n      x => x && x.rehydrate && x.rehydrate[operationKey]\n    );\n    if (store) {\n      const result = store.rehydrate && store.rehydrate[operationKey];\n      if (result) {\n        delete store.rehydrate[operationKey];\n        ssrExchange.restoreData({\n          [operationKey]: {\n            extensions: JSON.stringify(result.extensions),\n            data: JSON.stringify(result.data),\n            error: result.error,\n          },\n        });\n        delete store.rehydrate[operationKey];\n      }\n    }\n  }\n}\n","'use client';\n\nimport type {\n  AnyVariables,\n  CombinedError,\n  GraphQLRequestParams,\n  Operation,\n  OperationContext,\n  RequestPolicy,\n} from 'urql';\nimport { createRequest, useQuery as orig_useQuery } from 'urql';\nimport { useUrqlValue } from './useUrqlValue';\n\n/** Input arguments for the {@link useQuery} hook.\n *\n * @param query - The GraphQL query that `useQuery` executes.\n * @param variables - The variables for the GraphQL query that `useQuery` executes.\n */\nexport type UseQueryArgs<\n  Variables extends AnyVariables = AnyVariables,\n  Data = any,\n> = {\n  /** Updates the {@link RequestPolicy} for the executed GraphQL query operation.\n   *\n   * @remarks\n   * `requestPolicy` modifies the {@link RequestPolicy} of the GraphQL query operation\n   * that `useQuery` executes, and indicates a caching strategy for cache exchanges.\n   *\n   * For example, when set to `'cache-and-network'`, {@link useQuery} will\n   * receive a cached result with `stale: true` and an API request will be\n   * sent in the background.\n   *\n   * @see {@link OperationContext.requestPolicy} for where this value is set.\n   */\n  requestPolicy?: RequestPolicy;\n  /** Updates the {@link OperationContext} for the executed GraphQL query operation.\n   *\n   * @remarks\n   * `context` may be passed to {@link useQuery}, to update the {@link OperationContext}\n   * of a query operation. This may be used to update the `context` that exchanges\n   * will receive for a single hook.\n   *\n   * Hint: This should be wrapped in a `useMemo` hook, to make sure that your\n   * component doesn’t infinitely update.\n   *\n   * @example\n   * ```ts\n   * const [result, reexecute] = useQuery({\n   *   query,\n   *   context: useMemo(() => ({\n   *     additionalTypenames: ['Item'],\n   *   }), [])\n   * });\n   * ```\n   */\n  context?: Partial<OperationContext>;\n  /** Prevents {@link useQuery} from automatically executing GraphQL query operations.\n   *\n   * @remarks\n   * `pause` may be set to `true` to stop {@link useQuery} from executing\n   * automatically. The hook will stop receiving updates from the {@link Client}\n   * and won’t execute the query operation, until either it’s set to `false`\n   * or the {@link UseQueryExecute} function is called.\n   *\n   * @see {@link https://urql.dev/goto/docs/basics/react-preact/#pausing-usequery} for\n   * documentation on the `pause` option.\n   */\n  pause?: boolean;\n} & GraphQLRequestParams<Data, Variables>;\n\n/** State of the current query, your {@link useQuery} hook is executing.\n *\n * @remarks\n * `UseQueryState` is returned (in a tuple) by {@link useQuery} and\n * gives you the updating {@link OperationResult} of GraphQL queries.\n *\n * Even when the query and variables passed to {@link useQuery} change,\n * this state preserves the prior state and sets the `fetching` flag to\n * `true`.\n * This allows you to display the previous state, while implementing\n * a separate loading indicator separately.\n */\nexport interface UseQueryState<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n> {\n  /** Indicates whether `useQuery` is waiting for a new result.\n   *\n   * @remarks\n   * When `useQuery` is passed a new query and/or variables, it will\n   * start executing the new query operation and `fetching` is set to\n   * `true` until a result arrives.\n   *\n   * Hint: This is subtly different than whether the query is actually\n   * fetching, and doesn’t indicate whether a query is being re-executed\n   * in the background. For this, see {@link UseQueryState.stale}.\n   */\n  fetching: boolean;\n  /** Indicates that the state is not fresh and a new result will follow.\n   *\n   * @remarks\n   * The `stale` flag is set to `true` when a new result for the query\n   * is expected and `useQuery` is waiting for it. This may indicate that\n   * a new request is being requested in the background.\n   *\n   * @see {@link OperationResult.stale} for the source of this value.\n   */\n  stale: boolean;\n  /** The {@link OperationResult.data} for the executed query. */\n  data?: Data;\n  /** The {@link OperationResult.error} for the executed query. */\n  error?: CombinedError;\n  /** The {@link OperationResult.extensions} for the executed query. */\n  extensions?: Record<string, any>;\n  /** The {@link Operation} that the current state is for.\n   *\n   * @remarks\n   * This is the {@link Operation} that is currently being executed.\n   * When {@link UseQueryState.fetching} is `true`, this is the\n   * last `Operation` that the current state was for.\n   */\n  operation?: Operation<Data, Variables>;\n}\n\n/** Triggers {@link useQuery} to execute a new GraphQL query operation.\n *\n * @param opts - optionally, context options that will be merged with the hook's\n * {@link UseQueryArgs.context} options and the `Client`’s options.\n *\n * @remarks\n * When called, {@link useQuery} will re-execute the GraphQL query operation\n * it currently holds, even if {@link UseQueryArgs.pause} is set to `true`.\n *\n * This is useful for executing a paused query or re-executing a query\n * and get a new network result, by passing a new request policy.\n *\n * ```ts\n * const [result, reexecuteQuery] = useQuery({ query });\n *\n * const refresh = () => {\n *   // Re-execute the query with a network-only policy, skipping the cache\n *   reexecuteQuery({ requestPolicy: 'network-only' });\n * };\n * ```\n */\nexport type UseQueryExecute = (opts?: Partial<OperationContext>) => void;\n\n/** Result tuple returned by the {@link useQuery} hook.\n *\n * @remarks\n * Similarly to a `useState` hook’s return value,\n * the first element is the {@link useQuery}’s result and state,\n * a {@link UseQueryState} object,\n * and the second is used to imperatively re-execute the query\n * via a {@link UseQueryExecute} function.\n */\nexport type UseQueryResponse<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n> = [UseQueryState<Data, Variables>, UseQueryExecute];\n\n/** Hook to run a GraphQL query and get updated GraphQL results.\n *\n * @param args - a {@link UseQueryArgs} object, to pass a `query`, `variables`, and options.\n * @returns a {@link UseQueryResponse} tuple of a {@link UseQueryState} result, and re-execute function.\n *\n * @remarks\n * `useQuery` allows GraphQL queries to be defined and executed.\n * Given {@link UseQueryArgs.query}, it executes the GraphQL query with the\n * context’s {@link Client}.\n *\n * The returned result updates when the `Client` has new results\n * for the query, and changes when your input `args` change.\n *\n * Additionally, if the `suspense` option is enabled on the `Client`,\n * the `useQuery` hook will suspend instead of indicating that it’s\n * waiting for a result via {@link UseQueryState.fetching}.\n *\n * @see {@link https://urql.dev/goto/urql/docs/basics/react-preact/#queries} for `useQuery` docs.\n *\n * @example\n * ```ts\n * import { gql, useQuery } from 'urql';\n *\n * const TodosQuery = gql`\n *   query { todos { id, title } }\n * `;\n *\n * const Todos = () => {\n *   const [result, reexecuteQuery] = useQuery({\n *     query: TodosQuery,\n *     variables: {},\n *   });\n *   // ...\n * };\n * ```\n */\nexport function useQuery<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(\n  args: UseQueryArgs<Variables, Data>\n): UseQueryResponse<Data, Variables | undefined> {\n  const request = createRequest(\n    args.query,\n    (args.variables || {}) as AnyVariables\n  );\n  useUrqlValue(request.key);\n\n  const [result, execute] = orig_useQuery(args);\n\n  useUrqlValue(request.key);\n\n  return [result, execute];\n}\n"],"names":["ESCAPE_LOOKUP","ESCAPE_REGEX","htmlEscapeJsonString","str","replace","match","DataHydrationContext","React","createContext","undefined","transportDataToJS","data","key","JSON","stringify","DataHydrationContextProvider","nonce","children","dataHydrationContext","useRef","window","current","buildContext","createElement","Provider","value","useDataHydrationContext","useContext","insertHtml","ServerInsertedHTMLContext","isInjecting","RehydrateScript","operationValuesByKey","Object","keys","length","Fragment","__html","rehydrate","dangerouslySetInnerHTML","SSRContext","UrqlProvider","ssr","client","symbolString","urqlTransportSymbol","Symbol","for","useUrqlValue","operationKey","ssrExchange","rehydrationContext","Error","extractData","res","parsed","extensions","parse","error","stores","store","find","x","result","restoreData","useQuery","args","request","createRequest","query","variables","execute","orig_useQuery"],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASgB,QAAQA,CAItBC,IAAmC,EACY;AAC/C,EAAA,IAAMC,OAAO,GAAGC,kBAAa,CAC3BF,IAAI,CAACG,KAAK,EACTH,IAAI,CAACI,SAAS,IAAI,EACrB,CAAC,CAAA;AACDtB,EAAAA,YAAY,CAACmB,OAAO,CAACvD,GAAG,CAAC,CAAA;EAEzB,IAAM,CAACmD,MAAM,EAAEQ,OAAO,CAAC,GAAGC,aAAa,CAACN,IAAI,CAAC,CAAA;AAE7ClB,EAAAA,YAAY,CAACmB,OAAO,CAACvD,GAAG,CAAC,CAAA;AAEzB,EAAA,OAAO,CAACmD,MAAM,EAAEQ,OAAO,CAAC,CAAA;AAC1B;;;;;;;;;;;;"}